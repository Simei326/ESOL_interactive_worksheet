
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>What's Your Name? - ESOL Interactive Worksheet</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: auto; padding: 20px; }
    h2 { color: #2a5d84; }
    .question { margin-bottom: 20px; }
    input[type="text"], select { width: 100%; padding: 8px; margin-top: 5px; }
    button { padding: 10px 20px; margin-top: 10px; cursor: pointer; }
    .hidden { display: none; }
    .result { font-weight: bold; color: green; }
  </style>
</head>
<body>

<h1>What's Your Name? - Interactive Worksheet</h1>
<div class="question">
  <label for="studentName">Enter your name:</label>
  <input type="text" id="studentName">
</div>

<h2>1. Watch the dialogues and match them with greetings</h2>
<iframe width="100%" height="200" src="https://www.youtube.com/embed/zpR4r-2DJ7o" allowfullscreen></iframe>
<div class="question">
  <label>Which dialogue includes “I'm great!”?</label>
  
  <div>
    <label><input type="radio" name="q1" value="A"> A</label><br>
    <label><input type="radio" name="q1" value="B"> B</label><br>
    <label><input type="radio" name="q1" value="C"> C</label>
  </div>

</div>

<h2>2. Choose the correct word from listening</h2>
<iframe width="100%" height="200" src="https://www.youtube.com/embed/h2vyvMNISNE" allowfullscreen></iframe>
<div class="question">
  <label>Dialogue 1: What did Dana say? “Nice to meet you” or “Great to meet you”?</label>
  
  <div>
    <label><input type="radio" name="q2" value="Nice to meet you"> Nice to meet you</label><br>
    <label><input type="radio" name="q2" value="Great to meet you"> Great to meet you</label>
  </div>

</div>

<div class="question">
  <label>Dialogue 2: Kamala says she's…</label>
  
  <div>
    <label><input type="radio" name="q3" value="not so good"> not so good</label><br>
    <label><input type="radio" name="q3" value="great"> great</label>
  </div>

</div>

<h2>3. Fill in the blanks</h2>
<div class="question">
  <label>My name is <input type="text" id="q4">.</label>
</div>

<div class="question">
  <label>My surname is <input type="text" id="q5">.</label>
</div>

</div>

<h2>4. Match the question with the answer</h2>
<div class="question">
  <label>“Can you spell your name?”</label>
  
  <div>
    <label><input type="radio" name="q7" value="1"> 1. Sure, it’s R-O-B-E-R-T-O.</label><br>
    <label><input type="radio" name="q7" value="2"> 2. It’s Adkin.</label><br>
    <label><input type="radio" name="q7" value="3"> 3. I’m fine, thank you.</label>
  </div>

</div>

<h2>5. Choose a phrase to say goodbye</h2>
<div class="question">
  
  <div>
    <label><input type="radio" name="q8" value="Bye!"> Bye!</label><br>
    <label><input type="radio" name="q8" value="See you!"> See you!</label><br>
    <label><input type="radio" name="q8" value="Have a nice day!"> Have a nice day!</label>
  </div>

</div>

<button onclick="submitQuiz()">Submit</button>
<p class="result hidden" id="score"></p>
<a id="downloadLink" class="hidden">Download your result</a>

<script>
function submitQuiz() {
  const answers = {
    q1: "C",
    q2: "Nice to meet you",
    q3: "not so good",
    q4: "",  // subjective
    q5: "",  // subjective
        q7: "1",
    q8: ""   // open choice
  };

  const studentName = document.getElementById("studentName").value.trim();
  let score = 0;
  let total = 4; // Only auto-gradable ones

  if (document.querySelector('input[name="q1"]:checked')?.value === answers.q1) score++;
  if (document.querySelector('input[name="q2"]:checked')?.value === answers.q2) score++;
  if (document.querySelector('input[name="q3"]:checked')?.value === answers.q3) score++;
    if (document.querySelector('input[name="q7"]:checked')?.value === answers.q7) score++;

  document.getElementById("score").innerText = studentName + ", your score is: " + score + " / " + total;
  document.getElementById("score").classList.remove("hidden");

  const csvContent = "data:text/csv;charset=utf-8," +
    ["Name", "Q1", "Q2", "Q3", "Q4", "Q5", "Q6", "Q7", "Q8", "Score"].join(",") + "\n" +
    [studentName,document.querySelector('input[name="q1"]:checked')?.value || "",document.querySelector('input[name="q2"]:checked')?.value || "",document.querySelector('input[name="q3"]:checked')?.value || "",document.getElementById("q4").value,document.getElementById("q5").value,document.querySelector('input[name="q7"]:checked')?.value || "",document.querySelector('input[name="q8"]:checked')?.value || "",
     document.getElementById("q1").value,
     document.getElementById("q2").value,
     document.getElementById("q3").value,
     document.getElementById("q4").value,
     document.getElementById("q5").value,
     document.getElementById("q6").value,
     document.getElementById("q7").value,
     document.getElementById("q8").value,
     score + "/" + total
    ].join(",");

  const encodedUri = encodeURI(csvContent);
  const downloadLink = document.getElementById("downloadLink");
  downloadLink.setAttribute("href", encodedUri);
  downloadLink.setAttribute("download", "student_result.csv");
  downloadLink.innerText = "Click here to download your results";
  downloadLink.classList.remove("hidden");
}
</script>

</body>
</html>
